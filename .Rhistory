most_recent_date <- cases %>%
slice_tail(1) %>%
pull(Date)
most_recent_r <- R_df %>%
slice_tail(1) %>%
pull(`Mean(R)`)
# Plot R
png("RivCACOVID/incid.png", width = 800, height = 400)
plot(covid_parametric, "incid")
dev.off()
png("RivCACOVID/R.png", width = 800, height = 400)
plot(covid_parametric, "R")
dev.off()
# Write data to cache
save(cases, file = 'RivCACOVID/cases.Rdata')
save(covid_parametric, file = 'RivCACOVID/covid_parametric.Rdata')
save(most_recent_date, file = 'RivCACOVID/most_recent_date.Rdata')
save(most_recent_r, file = 'RivCACOVID/most_recent_r.Rdata')
# Get COVID Data from Riverside County ArcGIS
library(httr)
library(jsonlite)
library(tidyverse)
library(lubridate)
library(EpiEstim)
library(incidence)
# Import data
r <- GET("https://services1.arcgis.com/pWmBUdSlVpXStHU6/arcgis/rest/services/COVID19_Cases_DateReport/FeatureServer/0/query?f=json&where=1%3D1&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*&orderByFields=DateReported%20asc&outSR=102100&resultOffset=0&resultRecordCount=32000&resultType=standard&cacheHint=true")
r_json <- content(r)
cases <- fromJSON(
r_json
)$features$attributes %>%
mutate(
DateReported = as_datetime(DateReported / 1000),
Date = as_date(DateReported)
)
# Construct the curve
incidence <- as.incidence(
cases$ReportedNewCases,
dates = cases$Date
)
# Plot incidence
plot(incidence)
# Estimate R
covid_parametric <- estimate_R(
incidence,
method = "parametric_si",
config = make_config(list(
mean_si = 3.96,
std_si = 4.75
))
)
R_df <- covid_parametric$R
most_recent_date <- cases %>%
slice_tail(1) %>%
pull(Date)
most_recent_r <- R_df %>%
slice_tail(1) %>%
pull(`Mean(R)`)
# Plot R
png("RivCACOVID/incid.png", width = 800, height = 400)
plot(covid_parametric, "incid")
dev.off()
png("RivCACOVID/R.png", width = 800, height = 400)
plot(covid_parametric, "R")
dev.off()
# Write data to cache
save(cases, file = 'RivCACOVID/cases.Rdata')
save(covid_parametric, file = 'RivCACOVID/covid_parametric.Rdata')
save(most_recent_date, file = 'RivCACOVID/most_recent_date.Rdata')
save(most_recent_r, file = 'RivCACOVID/most_recent_r.Rdata')
shiny::runApp('RivCACOVID')
# Get COVID Data from Riverside County ArcGIS
library(httr)
library(jsonlite)
library(tidyverse)
library(lubridate)
library(EpiEstim)
library(incidence)
# Import data
r <- GET("https://services1.arcgis.com/pWmBUdSlVpXStHU6/arcgis/rest/services/COVID19_Cases_DateReport/FeatureServer/0/query?f=json&where=1%3D1&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*&orderByFields=DateReported%20asc&outSR=102100&resultOffset=0&resultRecordCount=32000&resultType=standard&cacheHint=true")
r_json <- content(r)
cases <- fromJSON(
r_json
)$features$attributes %>%
mutate(
DateReported = as_datetime(DateReported / 1000),
Date = as_date(DateReported)
)
# Construct the curve
incidence <- as.incidence(
cases$ReportedNewCases,
dates = cases$Date
)
# Plot incidence
plot(incidence)
# Estimate R
covid_parametric <- estimate_R(
incidence,
method = "parametric_si",
config = make_config(list(
mean_si = 3.96,
std_si = 4.75
))
)
R_df <- covid_parametric$R
most_recent_date <- cases %>%
slice_tail(1) %>%
pull(Date)
most_recent_r <- R_df %>%
slice_tail(1) %>%
pull(`Mean(R)`)
# Plot R
png("RivCACOVID/incid.png", width = 800, height = 400)
plot(covid_parametric, "incid")
dev.off()
png("RivCACOVID/R.png", width = 800, height = 400)
plot(covid_parametric, "R")
dev.off()
# Write data to cache
save(cases, file = 'RivCACOVID/cases.Rdata')
save(covid_parametric, file = 'RivCACOVID/covid_parametric.Rdata')
save(most_recent_date, file = 'RivCACOVID/most_recent_date.Rdata')
save(most_recent_r, file = 'RivCACOVID/most_recent_r.Rdata')
shiny::runApp('RivCACOVID')
# Get COVID Data from Riverside County ArcGIS
library(httr)
library(jsonlite)
library(tidyverse)
library(lubridate)
library(EpiEstim)
library(incidence)
# Import data
r <- GET("https://services1.arcgis.com/pWmBUdSlVpXStHU6/arcgis/rest/services/COVID19_Cases_DateReport/FeatureServer/0/query?f=json&where=1%3D1&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*&orderByFields=DateReported%20asc&outSR=102100&resultOffset=0&resultRecordCount=32000&resultType=standard&cacheHint=true")
r_json <- content(r)
cases <- fromJSON(
r_json
)$features$attributes %>%
mutate(
DateReported = as_datetime(DateReported / 1000),
Date = as_date(DateReported)
)
# Construct the curve
incidence <- as.incidence(
cases$ReportedNewCases,
dates = cases$Date
)
# Plot incidence
plot(incidence)
# Estimate R
covid_parametric <- estimate_R(
incidence,
method = "parametric_si",
config = make_config(list(
mean_si = 3.96,
std_si = 4.75
))
)
R_df <- covid_parametric$R
most_recent_date <- cases %>%
slice_tail(1) %>%
pull(Date)
most_recent_r <- R_df %>%
slice_tail(1) %>%
pull(`Mean(R)`)
# Plot R
png("RivCACOVID/incid.png", width = 800, height = 400)
plot(covid_parametric, "incid")
dev.off()
png("RivCACOVID/R.png", width = 800, height = 400)
plot(covid_parametric, "R")
dev.off()
# Write data to cache
save(cases, file = 'RivCACOVID/cases.Rdata')
save(covid_parametric, file = 'RivCACOVID/covid_parametric.Rdata')
save(most_recent_date, file = 'RivCACOVID/most_recent_date.Rdata')
save(most_recent_r, file = 'RivCACOVID/most_recent_r.Rdata')
# Get COVID Data from Riverside County ArcGIS
library(httr)
library(jsonlite)
library(tidyverse)
library(lubridate)
library(EpiEstim)
library(incidence)
# Import data
r <- GET("https://services1.arcgis.com/pWmBUdSlVpXStHU6/arcgis/rest/services/COVID19_Cases_DateReport/FeatureServer/0/query?f=json&where=1%3D1&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*&orderByFields=DateReported%20asc&outSR=102100&resultOffset=0&resultRecordCount=32000&resultType=standard&cacheHint=true")
r_json <- content(r)
cases <- fromJSON(
r_json
)$features$attributes %>%
mutate(
DateReported = as_datetime(DateReported / 1000),
Date = as_date(DateReported)
)
# Construct the curve
incidence <- as.incidence(
cases$ReportedNewCases,
dates = cases$Date
)
# Plot incidence
plot(incidence)
# Estimate R
covid_parametric <- estimate_R(
incidence,
method = "parametric_si",
config = make_config(list(
mean_si = 3.96,
std_si = 4.75
))
)
R_df <- covid_parametric$R
most_recent_date <- cases %>%
slice_tail(1) %>%
pull(Date)
most_recent_r <- R_df %>%
slice_tail(1) %>%
pull(`Mean(R)`)
# Plot R
png("RivCACOVID/incid.png", width = 800, height = 400)
plot(covid_parametric, "incid")
dev.off()
png("RivCACOVID/R.png", width = 800, height = 400)
plot(covid_parametric, "R")
dev.off()
# Write data to cache
save(cases, file = 'RivCACOVID/cases.Rdata')
save(covid_parametric, file = 'RivCACOVID/covid_parametric.Rdata')
save(most_recent_date, file = 'RivCACOVID/most_recent_date.Rdata')
save(most_recent_r, file = 'RivCACOVID/most_recent_r.Rdata')
shiny::runApp('RivCACOVID')
View(R_df)
View(R_df)
R_df <- covid_parametric$R %>%
mutate(Date = "2020-02-20" + t_end)
R_df <- covid_parametric$R %>%
mutate(Date = "2020-02-20" + t_end)
R_df <- covid_parametric$R %>%
mutate(Date = date("2020-02-20") + t_end)
View(R_df)
case_table <- cases %>%
select(Date, ReportedNewCases, ReportedTotalCase) %>%
left_join(R_df %>% select(Date, Mean(R)))
case_table <- cases %>%
select(Date, ReportedNewCases, ReportedTotalCases) %>%
left_join(R_df %>% select(Date, Mean(R)))
case_table <- cases %>%
select(Date, ReportedNewCases, ReportedTotalCases) %>%
left_join(R_df %>% select(Date, `Mean(R)`))
View(case_table)
View(r)
View(cases)
# Write data to cache
save(case_table, file = 'RivCACOVID/case_table.Rdata')
runApp('RivCACOVID')
runApp('RivCACOVID')
runApp('RivCACOVID')
runApp('RivCACOVID')
case_table %>%
arrange(desc(Date)) %>%
mutate(as.character((Date)))
runApp('RivCACOVID')
case_table %>%
arrange(desc(Date)) %>%
mutate(Date = as.character((Date)))
runApp('RivCACOVID')
library(RCurl)
# Get COVID Data from Riverside County ArcGIS
library(httr)
library(jsonlite)
library(tidyverse)
library(lubridate)
library(EpiEstim)
library(incidence)
library(RCurl)
# Import data
r <- GET("https://services1.arcgis.com/pWmBUdSlVpXStHU6/arcgis/rest/services/COVID19_Cases_DateReport/FeatureServer/0/query?f=json&where=1%3D1&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*&orderByFields=DateReported%20asc&outSR=102100&resultOffset=0&resultRecordCount=32000&resultType=standard&cacheHint=true")
r_json <- content(r)
cases <- fromJSON(
r_json
)$features$attributes %>%
mutate(
DateReported = as_datetime(DateReported / 1000),
Date = as_date(DateReported)
)
# Construct the curve
incidence <- as.incidence(
cases$ReportedNewCases,
dates = cases$Date
)
# Plot incidence
plot(incidence)
# Estimate R
covid_parametric <- estimate_R(
incidence,
method = "parametric_si",
config = make_config(list(
mean_si = 3.96,
std_si = 4.75
))
)
R_df <- covid_parametric$R %>%
mutate(Date = date("2020-02-20") + t_end)
most_recent_date <- cases %>%
slice_tail(1) %>%
pull(Date)
most_recent_r <- R_df %>%
slice_tail(1) %>%
pull(`Mean(R)`)
case_table <- cases %>%
select(Date, ReportedNewCases, ReportedTotalCases) %>%
left_join(R_df %>% select(Date, `Mean(R)`))
# Plot R
png("RivCACOVID/incid.png", width = 800, height = 400)
plot(covid_parametric, "incid")
dev.off()
png("RivCACOVID/R.png", width = 800, height = 400)
plot(covid_parametric, "R")
dev.off()
# Write data to cache
save(case_table, file = 'RivCACOVID/case_table.Rdata')
save(covid_parametric, file = 'RivCACOVID/covid_parametric.Rdata')
save(most_recent_date, file = 'RivCACOVID/most_recent_date.Rdata')
save(most_recent_r, file = 'RivCACOVID/most_recent_r.Rdata')
shiny::runApp('RivCACOVID')
png("RivCACOVID/R.png", width = 800, height = 400)
plot(covid_parametric, "R", legend = FALSE)
png("RivCACOVID/R.png", width = 800, height = 400)
plot(covid_parametric, "R", legend = FALSE)
dev.off()
runApp('RivCACOVID')
runApp('RivCACOVID')
incid <- plot(covid_parametric, "incid")
incid <- plot(covid_parametric, "incid")
# Plot R
png("RivCACOVID/incid.png", width = 800, height = 400)
incid <- plot(covid_parametric, "incid") + scale_x_date(date_breaks = "1 month")
incid
dev.off()
# Plot R
png("RivCACOVID/incid.png", width = 800, height = 400)
incid <- plot(covid_parametric, "incid") +
scale_x_date(date_breaks = "1 month",
date_labels = "%B")
incid
dev.off()
# Get COVID Data from Riverside County ArcGIS
library(httr)
library(jsonlite)
library(tidyverse)
library(lubridate)
library(EpiEstim)
library(incidence)
library(RCurl)
# Import data
r <- GET("https://services1.arcgis.com/pWmBUdSlVpXStHU6/arcgis/rest/services/COVID19_Cases_DateReport/FeatureServer/0/query?f=json&where=1%3D1&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*&orderByFields=DateReported%20asc&outSR=102100&resultOffset=0&resultRecordCount=32000&resultType=standard&cacheHint=true")
r_json <- content(r)
cases <- fromJSON(
r_json
)$features$attributes %>%
mutate(
DateReported = as_datetime(DateReported / 1000),
Date = as_date(DateReported)
)
# Construct the curve
incidence <- as.incidence(
cases$ReportedNewCases,
dates = cases$Date
)
# Plot incidence
plot(incidence)
# Estimate R
covid_parametric <- estimate_R(
incidence,
method = "parametric_si",
config = make_config(list(
mean_si = 3.96,
std_si = 4.75
))
)
R_df <- covid_parametric$R %>%
mutate(Date = date("2020-02-20") + t_end)
most_recent_date <- cases %>%
slice_tail(1) %>%
pull(Date)
most_recent_r <- R_df %>%
slice_tail(1) %>%
pull(`Mean(R)`)
case_table <- cases %>%
select(Date, ReportedNewCases, ReportedTotalCases) %>%
left_join(R_df %>% select(Date, `Mean(R)`))
# Plot R
png("RivCACOVID/incid.png", width = 800, height = 400)
incid <- plot(covid_parametric, "incid") +
scale_x_date(date_breaks = "1 month",
date_labels = "%B")
incid
dev.off()
png("RivCACOVID/R.png", width = 800, height = 400)
plot(covid_parametric, "R", legend = FALSE)
dev.off()
# Write data to cache
save(case_table, file = 'RivCACOVID/case_table.Rdata')
save(covid_parametric, file = 'RivCACOVID/covid_parametric.Rdata')
save(most_recent_date, file = 'RivCACOVID/most_recent_date.Rdata')
save(most_recent_r, file = 'RivCACOVID/most_recent_r.Rdata')
runApp('RivCACOVID')
install.packages("ggthemes")
library(ggthemes)
library(ggthemes)
source('~/GitHub/RivCoCOVID/01 - Import Riverside Data.R')
runApp('RivCACOVID')
# Plot R
png("RivCACOVID/incid.png", width = 800, height = 400)
# Plot R
png("RivCACOVID/incid.png", width = 800, height = 400)
incid <- plot(covid_parametric, "incid") +
scale_x_date(date_breaks = "1 month",
date_labels = "%B") +
theme_few()
incid
dev.off()
png("RivCACOVID/R.png", width = 800, height = 400)
plot(covid_parametric, "R", legend = FALSE)  +
theme_few()
dev.off()
# Write data to cache
save(case_table, file = 'RivCACOVID/case_table.Rdata')
save(covid_parametric, file = 'RivCACOVID/covid_parametric.Rdata')
save(most_recent_date, file = 'RivCACOVID/most_recent_date.Rdata')
save(most_recent_r, file = 'RivCACOVID/most_recent_r.Rdata')
plot(covid_parametric, "R", legend = FALSE)  +
theme_few()
# Get COVID Data from Riverside County ArcGIS
library(httr)
library(jsonlite)
library(tidyverse)
library(lubridate)
library(EpiEstim)
library(incidence)
library(RCurl)
library(ggthemes)
# Import data
r <- GET("https://services1.arcgis.com/pWmBUdSlVpXStHU6/arcgis/rest/services/COVID19_Cases_DateReport/FeatureServer/0/query?f=json&where=1%3D1&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*&orderByFields=DateReported%20asc&outSR=102100&resultOffset=0&resultRecordCount=32000&resultType=standard&cacheHint=true")
r_json <- content(r)
cases <- fromJSON(
r_json
)$features$attributes %>%
mutate(
DateReported = as_datetime(DateReported / 1000),
Date = as_date(DateReported)
)
# Construct the curve
incidence <- as.incidence(
cases$ReportedNewCases,
dates = cases$Date
)
# Plot incidence
plot(incidence)
# Estimate R
covid_parametric <- estimate_R(
incidence,
method = "parametric_si",
config = make_config(list(
mean_si = 3.96,
std_si = 4.75
))
)
R_df <- covid_parametric$R %>%
mutate(Date = date("2020-02-20") + t_end)
most_recent_date <- cases %>%
slice_tail(1) %>%
pull(Date)
most_recent_r <- R_df %>%
slice_tail(1) %>%
pull(`Mean(R)`)
case_table <- cases %>%
select(Date, ReportedNewCases, ReportedTotalCases) %>%
left_join(R_df %>% select(Date, `Mean(R)`))
# Plot R
png("RivCACOVID/incid.png", width = 800, height = 400)
incid <- plot(covid_parametric, "incid") +
scale_x_date(date_breaks = "1 month",
date_labels = "%B") +
theme_few()
incid
dev.off()
png("RivCACOVID/R.png", width = 800, height = 400)
plot(covid_parametric, "R", legend = FALSE)  +
theme_few()
dev.off()
# Write data to cache
save(case_table, file = 'RivCACOVID/case_table.Rdata')
save(covid_parametric, file = 'RivCACOVID/covid_parametric.Rdata')
save(most_recent_date, file = 'RivCACOVID/most_recent_date.Rdata')
save(most_recent_r, file = 'RivCACOVID/most_recent_r.Rdata')
shiny::runApp('RivCACOVID')
png("RivCACOVID/R.png", width = 800, height = 400)
plot(covid_parametric, "R", legend = FALSE)  +
theme_few(legend.position = "none")
png("RivCACOVID/R.png", width = 800, height = 400)
plot(covid_parametric, "R", legend = FALSE)  +
theme_few(legend.position = "none")
png("RivCACOVID/R.png", width = 800, height = 400)
plot(covid_parametric, "R", legend = FALSE)  +
theme_few() +
theme(legend.position = "none")
dev.off()
# Write data to cache
save(case_table, file = 'RivCACOVID/case_table.Rdata')
save(covid_parametric, file = 'RivCACOVID/covid_parametric.Rdata')
save(most_recent_date, file = 'RivCACOVID/most_recent_date.Rdata')
save(most_recent_r, file = 'RivCACOVID/most_recent_r.Rdata')
runApp('RivCACOVID')
